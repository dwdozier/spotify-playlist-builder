{
  "description": "Development hooks for Spotify Playlist Builder",

  "hooks": {
    "pre-edit": {
      "description": "Run before editing Python files to check syntax",
      "pattern": "**/*.py",
      "command": "python -m py_compile {file}",
      "continueOnError": true
    },

    "post-edit": {
      "description": "Format and lint Python files after editing",
      "pattern": "**/*.py",
      "commands": [
        {
          "name": "black-format",
          "command": "[ -f .venv/bin/black ] && .venv/bin/black {file} --line-length 100 || echo 'Skipping black (not installed)'",
          "continueOnError": true
        },
        {
          "name": "ruff-lint",
          "command": "[ -f .venv/bin/ruff ] && .venv/bin/ruff check {file} || echo 'Skipping ruff (not installed)'",
          "continueOnError": true
        }
      ]
    },

    "pre-commit": {
      "description": "Run checks before committing",
      "commands": [
        {
          "name": "check-env",
          "command": "! git diff --cached --name-only | grep -q '^.env$' || (echo 'ERROR: Attempting to commit .env file!' && exit 1)",
          "continueOnError": false
        },
        {
          "name": "format-check",
          "command": "[ -f .venv/bin/black ] && .venv/bin/black --check . --line-length 100 || echo 'Skipping format check'",
          "continueOnError": true
        }
      ]
    },

    "post-write": {
      "description": "Actions after writing new files",
      "pattern": "playlists/**/*.json",
      "command": "python -m json.tool {file} > /dev/null && echo 'JSON validated: {file}' || echo 'Invalid JSON in {file}'",
      "continueOnError": true
    }
  },

  "settings": {
    "verbose": false,
    "timeout": 10000,
    "shell": "/bin/bash"
  }
}
